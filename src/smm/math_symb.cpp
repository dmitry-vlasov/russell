#include "smm/sys.hpp"
#include "rus/ast.hpp"

namespace mdl { namespace smm {

inline rus::Const make_const(const char* ascii, const char* unicode, const char* latex) {
	return rus::Const{Lex::toInt(unicode), Lex::toInt(ascii), Lex::toInt(latex)};
}

inline uint make_key(const char* key) {
	return Lex::toInt(key);
}

map<uint, rus::Const> math_consts = {
		{make_key("|-"), make_const("|-", "âŠ¢", "vdash")},
		{make_key("->"), make_const("->", "â†’", "\\rightarrow")},
		{make_key("-."), make_const("-.", "Â¬", "\\lnot")},
		{make_key("<->"), make_const("<->", "â†”", "\\leftrightarrow")},
		{make_key("\\/"), make_const("\\/", "âˆ¨", "\\lor")},
		{make_key("/\\"), make_const("/\\", "âˆ§", "\\land")},
		{make_key("-/\\"), make_const("-/\\", "âŠ¼", "\\bar{\\wedge}")},
		{make_key("A."), make_const("A.", "âˆ€", "\\forall")},
		{make_key("E."), make_const("E.", "âˆƒ", "\\exists")},
		{make_key("e."), make_const("e.", "âˆˆ", "\\in")},
		{make_key("E!"), make_const("E!", "âˆƒ!", "\\exists{!}")},
		{make_key("E*"), make_const("E*", "âˆƒ*", "\\exists^{\\ast}")},
		{make_key("{"), make_const("{", "{", "\\{")},
		{make_key("}"), make_const("}", "}", "\\}")},
		{make_key("=/="), make_const("=/=", "â‰ ", "\\ne")},
		{make_key("e/"), make_const("e/", "âˆ‰", "\\notin")},
		{make_key("V"), make_const("V", "ğ•", "\\rm{V}")},
		{make_key("[_"), make_const("[_", "[_", "[")},
		{make_key("]_"), make_const("]_", "]_", "]")},
		{make_key("C_"), make_const("C_", "âŠ†", "\\subseteq")},
		{make_key("C."), make_const("C.", "âŠ‚", "\\subset")},
		{make_key("\\"), make_const("\\", "âˆ–", "\\setminus")},
		{make_key("u."), make_const("u.", "âˆª", "\\cup")},
		{make_key("i^i"), make_const("i^i", "âˆ©", "\\cap")},
		{make_key("(/)"), make_const("(/)", "âˆ…", "\\emptyset")},
		{make_key("~P"), make_const("~P", "Pow", "\\cal{P}")},
		{make_key("<."), make_const("<.", "âŒ©", "\\langle")},
		{make_key(">."), make_const(">.", "âŒª", "\\rangle")},
		{make_key("U."), make_const("U.", "â‹ƒ", "\\bigcup")},
		{make_key("|^|"), make_const("|^|", "â‹‚", "\\bigcap")},
		{make_key("U_"), make_const("U_", "â‹ƒ_", "\\bigcup")},
		{make_key("|^|_"), make_const("|^|_", "â‹‚_", "\\bigcap")},
		{make_key("_E"), make_const("_E", "ğ›œ", "\\epsilon")},
		{make_key("_I"), make_const("_I", "_I", "\\rm{Id}")},
		{make_key("om"), make_const("om", "Ï‰", "\\omega")},
		{make_key("X."), make_const("X.", "Ã—", "\\times")},
		{make_key("`'"), make_const("`'", "â»Â¹", "{}^{-1}")},
		{make_key("|`"), make_const("|`", "â†¾", "\\upharpoonright")},
		{make_key("\""), make_const("\"", "\"", "``")},
		{make_key("o."), make_const("o.", "âˆ˜", "\\circ")},
		{make_key("-->"), make_const("-->", "âŸ¶", "\\longrightarrow")},
		{make_key("-1-1->"), make_const("-1-1->", "â†£", "\\rightarrowtail")},
		{make_key("-onto->"), make_const("-onto->", "â† ", "\\twoheadrightarrow")},
		{make_key("-1-1-onto->"), make_const("-1-1-onto->", "â¤–", "\\rightarrowtail\\twoheadrightarrow")},
		{make_key("X_"), make_const("X_", "Ã—_", "\\times")},
		{make_key("|->"), make_const("|->", "â†¦", "\\mapsto")},
		{make_key("^m"), make_const("^m", "â†‘m", "\\uparrow_m")},
		{make_key("^pm"), make_const("^pm", "â†‘pm", "\\uparrow_{pm}")},
		{make_key("+o"), make_const("+o", "+â‚’", "+_o")},
		{make_key(".o"), make_const(".o", "âˆ™â‚’", "\\cdot_o")},
		{make_key("^o"), make_const("^o", "â†‘â‚’", "\\uparrow_o")},
		{make_key("1o"), make_const("1o", "1â‚’", "1_o")},
		{make_key("2o"), make_const("2o", "2â‚’", "2_o")},
		{make_key("/."), make_const("/.", "/.", "\\diagup")},
		{make_key("~~"), make_const("~~", "â‰ˆ", "\\approx")},
		{make_key("~<_"), make_const("~<_", "â‰¼", "\\preccurlyeq")},
		{make_key("~<"), make_const("~<", "â‰º", "\\prec")},
		{make_key("aleph"), make_const("aleph", "â„µ", "\\aleph")},
		{make_key("+c"), make_const("+c", "+ğœ", "+_c")},
		{make_key("R1"), make_const("R1", "Râ‚", "R_1")},
		{make_key(".N"), make_const(".N", "âˆ™N", "\\cdot_{\\cal{N}}")},
		{make_key("<N"), make_const("<N", "<N", "<_{\\cal{N}}")},
		{make_key("+pQ"), make_const("+pQ", "+pQ", "+_{p\\cal{Q}}")},
		{make_key(".pQ"), make_const(".pQ", "âˆ™pQ", "\\cdot_{p\\cal{Q}}")},
		{make_key("Q."), make_const("Q.", "Q.", "\\cal{Q}")},
		{make_key(".Q"), make_const(".Q", "âˆ™Q", "\\cdot_{\\cal{Q}}")},
		{make_key("P."), make_const("P.", "Pos", "\\rm{Pos}")},
		{make_key("1P"), make_const("1P", "1Pos", "1_{\\rm{Pos}}")},
		{make_key("+P."), make_const("+P.", "+Pos", "+_{\\rm{Pos}}")},
		{make_key(".P."), make_const(".P.", "âˆ™Pos", "\\cdot_{\\rm{Pos}}")},
		{make_key("<P"), make_const("<P", "<Pos", "<_{\\rm{Pos}}")},
		{make_key("+pR"), make_const("+pR", "+pR", "+_{p\\cal{R}}")},
		{make_key(".pR"), make_const(".pR", "âˆ™pR", "\\cdot_{p\\cal{R}}")},
		{make_key("-1R"), make_const("-1R", "-1R", "-1_{p\\cal{R}}")},
		{make_key(".R"), make_const(".R", "âˆ™R", "\\cdot_{p\\cal{R}}")},
		{make_key("<R"), make_const("<R", "<R", "<_{p\\cal{R}}")},
		{make_key("<RR"), make_const("<RR", "<â„", "<_{\\mathbb{R}}")},
		{make_key("CC"), make_const("CC", "â„‚", "\\mathbb{C}")},
		{make_key("RR"), make_const("RR", "â„", "\\mathbb{R}")},
		{make_key("x."), make_const("x.", "âˆ™", "\\cdot")},
		{make_key("+oo"), make_const("+oo", "+âˆ", "+\\infty")},
		{make_key("-oo"), make_const("-oo", "-âˆ", "-\\infty")},
		{make_key("RR*"), make_const("RR*", "â„*", "\\mathbb{R}*")},
		{make_key("<_"), make_const("<_", "â‰¤", "\\le")},
		{make_key("NN"), make_const("NN", "â„•", "\\mathbb{N}")},
		{make_key("NN0"), make_const("NN0", "â„•â‚€", "\\mathbb{N}_0")},
		{make_key("ZZ"), make_const("ZZ", "â„¤", "\\mathbb{Z}")},
		{make_key("QQ"), make_const("QQ", "â„š", "\\mathbb{Q}")},
		{make_key("RR+"), make_const("RR+", "â„âº", "\\mathbb{R}^+")},
		{make_key("sqr"), make_const("sqr", "âˆš", "\\surd")},
		{make_key("Re"), make_const("Re", "â„œ", "\\Re")},
		{make_key("Im"), make_const("Im", "â„‘", "\\Im")},
		{make_key("|_"), make_const("|_", "âŒŠ", "\\lfloor")},
		{make_key("=="), make_const("==", "â‰¡", "\\equiv")},
		{make_key("seq1"), make_const("seq1", "seqâ‚", "\\rm{seq}_1")},
		{make_key("ZZ>="), make_const("ZZ>=", "â„¤â‰¥", "\\mathbb{Z}_\\ge")},
		{make_key("seq0"), make_const("seq0", "seqâ‚€", "\\rm{seq}_0")},
		{make_key("^"), make_const("^", "â†‘", "\\uparrow")},
		{make_key("~~>"), make_const("~~>", "â‡", "\\rightsquigarrow")},
		{make_key("..."), make_const("...", "...", "\\ldots")},
		{make_key("sum_"), make_const("sum_", "âˆ‘", "\\sigma")},
		{make_key("_e"), make_const("_e", "â„‡", "\\rm{e}")},
		{make_key("pi"), make_const("pi", "Ï€", "\\pi")},
		{make_key("-cn->"), make_const("-cn->", "â€’cnâ†’", "\\longrightarrow_{\\rm{cn}}")},
		{make_key("~~>m"), make_const("~~>m", "â‡m", "\\rightsquigarrow_{\\rm{m}}")},
		{make_key("Id"), make_const("Id", "Id", "\\rm{Id}")},
		{make_key("^g"), make_const("^d", "â†‘g", "\\uparrow_g")},
		{make_key(".s"), make_const(".s", "âˆ™s", "\\cdot_s")},
		{make_key(".i"), make_const(".i", "âˆ™i", "\\cdot_i")},
		{make_key("~~>v"), make_const("~~>v", "â‡v", "\\rightsquigarrow_{\\rm{v}}")},
		{make_key("_|_"), make_const("_|_", "âŠ¥", "\\perp")},
		{make_key("vH"), make_const("vH", "vH", "\\vee_\\mathfrak{H}")},
		{make_key("\\/H"), make_const("\\/H", "\\/H", "\\bigvee_\\mathfrak{H}")},
		{make_key("<_op"), make_const("<_op", "â‰¤op", "\\le_{\\rm{op}}")},
		{make_key("Lambda"), make_const("Lambda", "Î›", "\\Lambda")},
		{make_key("<o"), make_const("<o", "â‹–", "\\lessdot")},
		{make_key("1stc"), make_const("1stc", "1stÏ‰", "1^{\\rm{st}}\\omega")},
		{make_key("2ndc"), make_const("2ndc", "2ndÏ‰", "2^{\\rm{nd}}\\omega")},
		{make_key("prod_"), make_const("prod_", "âˆ", "\\Pi")},
		{make_key("(+)"), make_const("(+)", "âŠ•", "\\oplus")},
		{make_key("~~>t"), make_const("~~>t", "â‡t", "\\rightsquigarrow_{\\rm{t}}")},
		{make_key("=~ph"), make_const("=~ph", "=~Ï†", "\\mbox{$=$\\~{}ph}")},
		{make_key("->.."), make_const("->..", "â‡’", "\\Longrightarrow")},
};

// Weird variables
map<uint, rus::Symbol> math_vars = {
		{make_key(".,"),   rus::Symbol(Lex::toInt(".cm"))},
		{make_key(".(x)"), rus::Symbol(Lex::toInt(".[x]"))},
		{make_key(".(+)"), rus::Symbol(Lex::toInt(".[+]"))}
};

}} // mdl::smm

